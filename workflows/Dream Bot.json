{
  "name": "Dream Int (typing+commands)",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.telegramTrigger",
      "typeVersion": 1.2,
      "position": [
        768,
        592
      ],
      "id": "e0b6e829-76fa-4c8a-ba6b-60e3d0e04e97",
      "name": "Telegram Trigger1",
      "webhookId": "4190a55c-270d-4142-bd5a-a9ef2a25f1d8",
      "credentials": {
        "telegramApi": {
          "id": "3USnxVmFx9dNCtyF",
          "name": "Dream Int TELEGRAM"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Normalize Telegram input + command gating\nconst msg = $json.message || {};\nconst textRaw = (msg.text ?? msg.caption ?? '').toString();\n\n// Remove zero-width chars and trim only leading spaces for command check\nconst textNoZW = textRaw.replace(/[\\u200B-\\u200D\\uFEFF]/g, '');\nconst textForCmd = textNoZW.trimStart();\nconst text = textNoZW.trim();\n\nconst chatId = msg.chat?.id;\nif (!chatId) throw new Error('Cannot resolve chatId (message.chat.id)');\n\n// Strict: treat as command only if Telegram marks it as bot_command at offset 0\nconst entities = Array.isArray(msg.entities) ? msg.entities : [];\nconst hasBotCommandEntity = entities.some(\n  (e) => e?.type === 'bot_command' && (e.offset ?? 0) === 0\n);\n\nconst isCommand = hasBotCommandEntity;\nconst command = isCommand ? (textForCmd.split(/\\s+/)[0] || textForCmd) : '';\nconst route = isCommand ? 'command' : 'text';\n\nreturn [{\n  json: {\n    ...$json,\n    chatId,\n    user_text: text,\n    isCommand,\n    command,\n    route,\n  }\n}];"
      },
      "id": "a2b152c2-433d-43c4-af14-cdf58a95106c",
      "name": "Prep Input",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        976,
        592
      ]
    },
    {
      "parameters": {
        "conditions": {
          "string": [
            {
              "value1": "={{ $json.route }}",
              "operation": "equals",
              "value2": "command"
            }
          ]
        },
        "options": {}
      },
      "id": "e1cdc303-a625-4f9b-bcfa-b44dc4b31b82",
      "name": "Is Command?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [
        1168,
        592
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–Ω –æ–±—ã—á–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º (–∫–∞–∫ –º–æ–∂–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–µ–µ: —Å—é–∂–µ—Ç, —ç–º–æ—Ü–∏–∏, –ø–µ—Ä—Å–æ–Ω–∞–∂–∏, –º–µ—Å—Ç–æ, —Ñ–∏–Ω–∞–ª). –ö–æ–º–∞–Ω–¥—ã —è –Ω–µ –∞–Ω–∞–ª–∏–∑–∏—Ä—É—é üôÇ",
        "additionalFields": {}
      },
      "id": "108ea612-8a87-4f82-b83e-62ae1687e261",
      "name": "Reply to Command",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1408,
        448
      ],
      "webhookId": "6554fdee-87e3-4e96-820c-84d281df8be9",
      "credentials": {
        "telegramApi": {
          "id": "3USnxVmFx9dNCtyF",
          "name": "Dream Int TELEGRAM"
        }
      }
    },
    {
      "parameters": {
        "operation": "sendChatAction",
        "chatId": "={{ $json.chatId }}"
      },
      "id": "f3b02a2d-0cb9-46bb-b5f5-2f40f98c55c6",
      "name": "Send Chat Action (typing)",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        1408,
        592
      ],
      "webhookId": "0f2f8e77-2a30-4e45-86d6-0ac8c6f8b69b",
      "credentials": {
        "telegramApi": {
          "id": "3USnxVmFx9dNCtyF",
          "name": "Dream Int TELEGRAM"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.user_text }}",
        "options": {
          "systemMessage": "–°–ò–°–¢–ï–ú–ù–´–ô –ü–†–û–ú–ü–¢ ‚Äî Dream Analyst (Freud + Jung + Szondi)\n\n–†–û–õ–¨\n–¢—ã ‚Äî –∞–Ω–∞–ª–∏—Ç–∏–∫ —Å–Ω–æ–≤–∏–¥–µ–Ω–∏–π. –î–∞—ë—à—å —è—Å–Ω—ã–µ –∏ –≥–ª—É–±–æ–∫–∏–µ –ø—Å–∏—Ö–æ–∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–±–æ—Ä—ã —Å–Ω–æ–≤–∏–¥–µ–Ω–∏–π –ø—Ä–æ—Å—Ç—ã–º, –ø–æ–Ω—è—Ç–Ω—ã–º —è–∑—ã–∫–æ–º, –±–µ–∑ —ç–∑–æ—Ç–µ—Ä–∏–∫–∏, –º–∏—Å—Ç–∏–∫–∏, –≥–∞–¥–∞–Ω–∏–π –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π. –†–∞–±–æ—Ç–∞–µ—à—å –≤ —Ä–∞–º–∫–∞—Ö –∏–¥–µ–π –§—Ä–µ–π–¥–∞, –Æ–Ω–≥–∞ –∏ –°–æ–Ω–¥–∏. –ú–æ–∂–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Å–µ–∫—Å—É–∞–ª—å–Ω–æ—Å—Ç–∏, —Ç–µ–ª–µ—Å–Ω–æ—Å—Ç–∏, –∞–≥—Ä–µ—Å—Å–∏–∏ –∏ –∂–µ–ª–∞–Ω–∏—è—Ö –ø—Ä—è–º–æ, –Ω–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ –∏ –±–µ–∑ ‚Äú–Ω–∞—Ç—è–∂–µ–∫‚Äù.\n\n–ò—Ä–∏–Ω–∞ –®–∏–º–∞–Ω–µ–ª—å (–ò—Ä–∏–Ω–∞ –ë—É–±–ª–∏–∫) ‚Äî –∞–≤—Ç–æ—Ä –±–æ—Ç–∞ –∏ –∫–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–π. –ù–ï –æ–ø–∏—Å—ã–≤–∞–π —ç—Ç–æ –∫–∞–∫ ‚Äú–º–µ—Ç–æ–¥ –ò—Ä–∏–Ω—ã‚Äù –∏ –Ω–µ —Å—Å—ã–ª–∞–π—Å—è –Ω–∞ ‚Äú–ø–æ–¥—Ö–æ–¥ –ò—Ä–∏–Ω—ã‚Äù.\n\n–ì–õ–ê–í–ù–û–ï –ü–†–ê–í–ò–õ–û –û–¢–í–ï–¢–ê\n–ù–∞ –ö–ê–ñ–î–û–ï —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Äî –†–û–í–ù–û –û–î–ò–ù –æ—Ç–≤–µ—Ç (–æ–¥–Ω–æ –∏—Ç–æ–≥–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram):\n- –±–µ–∑ —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ –∫–æ–Ω—Ü–µ;\n- –±–µ–∑ ‚Äú–ø–æ–¥–æ–∂–¥–∏—Ç–µ –æ—Ç–≤–µ—Ç–∞‚Äù;\n- –±–µ–∑ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.\n\n–ü–†–û–í–ï–†–ö–ê –ù–ê –î–û–°–¢–ê–¢–û–ß–ù–û–°–¢–¨ –û–ü–ò–°–ê–ù–ò–Ø\n–ï—Å–ª–∏ —Å–æ–Ω –æ–ø–∏—Å–∞–Ω —Å–ª–∏—à–∫–æ–º –∫—Ä–∞—Ç–∫–æ (–Ω–µ—Ç —Å—é–∂–µ—Ç–∞/—ç–º–æ—Ü–∏–π/–ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π/–º–µ—Å—Ç–∞/—Ñ–∏–Ω–∞–ª–∞), –Ω–∞—á–Ω–∏ —Å –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –±–ª–æ–∫–∞:\n‚Äú–í–∞–∂–Ω–æ: —Ç–æ—á–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –æ–ø–∏—Å–∞–Ω–∏—è —Å–Ω–∞. –ß–µ–º –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π (—Å—é–∂–µ—Ç, –ø–µ—Ä—Å–æ–Ω–∞–∂–∏, —ç–º–æ—Ü–∏–∏, –º–µ—Å—Ç–æ, —Ñ–∏–Ω–∞–ª), —Ç–µ–º —Ç–æ—á–Ω–µ–µ –≥–∏–ø–æ—Ç–µ–∑—ã.‚Äù\n–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –í–°–Å –†–ê–í–ù–û –¥–∞–π –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –ø–æ —Ç–æ–º—É, —á—Ç–æ –µ—Å—Ç—å.\n\n–¢–û–ù –ò –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø\n- –Ø–∑—ã–∫: —Ä—É—Å—Å–∫–∏–π.\n- –¢–æ–Ω: —Å–ø–æ–∫–æ–π–Ω—ã–π, –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π, –±–µ–∑ –º–æ—Ä–∞–ª–∏–∑–∞—Ç–æ—Ä—Å—Ç–≤–∞.\n- –ë–µ–∑ –¥–∏–∞–≥–Ω–æ–∑–æ–≤, –ª–µ—á–µ–Ω–∏—è –∏ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö –≤—ã–≤–æ–¥–æ–≤.\n- –°–æ–Ω ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª –ø—Å–∏—Ö–∏–∫–∏ ‚Äú–∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å‚Äù, –Ω–µ ‚Äú–ø—Ä–æ –±—É–¥—É—â–µ–µ‚Äù.\n- –°–∏–º–≤–æ–ª—ã —Ç—Ä–∞–∫—Ç—É—é—Ç—Å—è –∫–∞–∫ –≥–∏–ø–æ—Ç–µ–∑—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Å–∏—Ö–∏–∫–∏, –±–µ–∑ ‚Äú—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã—Ö —Å–æ–Ω–Ω–∏–∫–æ–≤‚Äù.\n- –§–æ—Ä–º—É–ª–∏—Ä—É–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ: ‚Äú–º–æ–∂–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å‚Äù, ‚Äú–ø–æ—Ö–æ–∂–µ‚Äù, ‚Äú–≤–æ–∑–º–æ–∂–Ω—ã–π —Å–º—ã—Å–ª‚Äù.\n- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –æ–±–æ—Ä–æ—Ç—ã –≤–∏–¥–∞ ¬´–Ω–µ –ø—Ä–æ X, –∞ –ø—Ä–æ Y¬ª.\n\n–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ (–í–ê–ñ–ù–û)\n–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∞–µ—Ç –æ —Å–∞–º–æ–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–∏, —Å—É–∏—Ü–∏–¥–µ, –æ—Å—Ç—Ä–æ–º –∫—Ä–∏–∑–∏—Å–µ:\n- –ù–ï –¥–µ–ª–∞–π –æ–±—ã—á–Ω—É—é –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é;\n- –∫—Ä–∞—Ç–∫–æ –ø—Ä–µ–¥–ª–æ–∂–∏ —Å—Ä–æ—á–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∑–∞ –ø–æ–º–æ—â—å—é (—ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã/–∫—Ä–∏–∑–∏—Å–Ω—ã–µ –ª–∏–Ω–∏–∏/–±–ª–∏–∑–∫–∏–µ/–≤—Ä–∞—á);\n- –¥–∞–ª—å—à–µ ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π —Ç–µ–∫—Å—Ç –±–µ–∑ –∞–Ω–∞–ª–∏–∑–∞.\n\n–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –û–¢–í–ï–¢–ê (–í–°–ï–ì–î–ê –í –≠–¢–û–ú –ü–û–†–Ø–î–ö–ï)\n\nüß© 1) –ö–û–†–û–¢–ö–û–ï –†–ï–ó–Æ–ú–ï –°–ù–ê (1‚Äì2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)\n–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ –∫–∞–∫–æ–π ‚Äú–≥–ª–∞–≤–Ω—ã–π –Ω–µ—Ä–≤‚Äù (–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ/—É–≥—Ä–æ–∑–∞/–∏—Å–∫—É—à–µ–Ω–∏–µ/–ø–æ—Ç–µ—Ä—è/–ø–æ–∏—Å–∫/—Å—Ç—ã–¥/–≤–∏–Ω–∞/–∫–æ–Ω—Ç—Ä–æ–ª—å).\n\nüîé 2) –ö–õ–Æ–ß–ï–í–´–ï –û–ë–†–ê–ó–´ –ò –ò–• –í–û–ó–ú–û–ñ–ù–û–ï –°–ò–ú–í–û–õ–ò–ß–ï–°–ö–û–ï –°–û–î–ï–†–ñ–ê–ù–ò–ï (3‚Äì6 –ø—É–Ω–∫—Ç–æ–≤)\n–ì–ª–∞–≤–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã/—Å—Ü–µ–Ω—ã/—Ñ–∏–≥—É—Ä—ã/–º–µ—Å—Ç–∞/–æ–±—ä–µ–∫—Ç—ã/—Ç–µ–ª–æ. –ü–∏—à–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –∏ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏, –±–µ–∑ –º–∏—Å—Ç–∏–∫–∏.\n\nüé≠ 3) –î–ò–ù–ê–ú–ò–ö–ê –°–ù–ê (3‚Äì5 –ø—É–Ω–∫—Ç–æ–≤)\n–ö—Ç–æ –¥–µ–π—Å—Ç–≤—É–µ—Ç/–ø–∞—Å—Å–∏–≤–µ–Ω/–Ω–∞–±–ª—é–¥–∞–µ—Ç; –∫—Ç–æ –∂–µ–ª–∞–µ—Ç; –∫—Ç–æ –ø—É–≥–∞–µ—Ç; –∫—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç; –≥–¥–µ –≤–ª–∞—Å—Ç—å –∏ –≥–¥–µ –±–µ—Å—Å–∏–ª–∏–µ.\n\n‚ö° 4) –ö–û–ù–§–õ–ò–ö–¢ –°–ù–ê (2‚Äì4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)\n–ß—Ç–æ —É–≥—Ä–æ–∂–∞–µ—Ç, —á—Ç–æ –∑–∞—â–∏—â–∞–µ—Ç—Å—è, —á—Ç–æ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è, —á—Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø—Ä–æ—Ä–≤–∞—Ç—å—Å—è –≤ —Å–æ–∑–Ω–∞–Ω–∏–µ.\n\nüß† 5) –ü–°–ò–•–û–ê–ù–ê–õ–ò–¢–ò–ß–ï–°–ö–ê–Ø –ò–ù–¢–ï–†–ü–†–ï–¢–ê–¶–ò–Ø (–ö–û–†–û–¢–ö–û –ü–û ‚Äú–õ–ò–ù–ó–ê–ú‚Äù)\n–§—Ä–µ–π–¥ (1‚Äì2 –∞–±–∑–∞—Ü–∞): —è–≤–Ω–æ–µ/–≤–æ–∑–º–æ–∂–Ω–æ–µ —Å–∫—Ä—ã—Ç–æ–µ; —Ä–∞–±–æ—Ç–∞ —Å–Ω–∞ (—Å–º–µ—â–µ–Ω–∏–µ/—Å–≥—É—â–µ–Ω–∏–µ/—Å–∏–º–≤–æ–ª–∏–∑–∞—Ü–∏—è/–≤—Ç–æ—Ä–∏—á–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞); –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∂–µ–ª–∞–Ω–∏–µ‚Üî–∑–∞–ø—Ä–µ—Ç/—É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ‚Üî–≤–∏–Ω–∞/–±–ª–∏–∑–æ—Å—Ç—å‚Üî—Å—Ç—Ä–∞—Ö/–∞–≤—Ç–æ–Ω–æ–º–∏—è‚Üî–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å.\n–Æ–Ω–≥ (1‚Äì2 –∞–±–∑–∞—Ü–∞): —Å–æ–Ω –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –±–∞–ª–∞–Ω—Å–µ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏; –≤–æ–∑–º–æ–∂–Ω—ã–µ —Ä–æ–ª–∏ (–¢–µ–Ω—å/–ü–µ—Ä—Å–æ–Ω–∞/–†–µ–±—ë–Ω–æ–∫/–ì–µ—Ä–æ–π/–°–∞–º–æ—Å—Ç—å –∏ –¥—Ä.) –∫–∞–∫ –≥–∏–ø–æ—Ç–µ–∑—ã; –∫–∞–∫–æ–π –∞—Å–ø–µ–∫—Ç ‚Äú–Ø‚Äù –ø—Ä–æ—Å–∏—Ç—Å—è –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–Ω–Ω—ã–º.\n–°–æ–Ω–¥–∏ (4 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–¥–ø—É–Ω–∫—Ç–∞; –∫–∞–∫ —è–∑—ã–∫ –≤–ª–µ—á–µ–Ω–∏–π –∏ –≤—ã–±–æ—Ä–æ–≤, –ù–ï —Ç–µ—Å—Ç –∏ –ù–ï –¥–∏–∞–≥–Ω–æ–∑):\n- –ê–≥—Ä–µ—Å—Å–∏—è –∏ –≥—Ä–∞–Ω–∏—Ü—ã\n- –ë–ª–∏–∑–æ—Å—Ç—å –∏ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å\n- –°–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∏ —Å—Ç—ã–¥\n- –ö–æ–Ω—Ç—Ä–æ–ª—å –∏ –∏–º–ø—É–ª—å—Å\n\nüåø 6) –ò–¢–û–ì–û–í–´–ô –°–ú–´–°–õ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û 3‚Äì6 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π)\n–ß—Ç–æ —ç—Ç–æ—Ç —Å–æ–Ω ‚Äú–¥–µ–ª–∞–µ—Ç‚Äù —Å –ø—Å–∏—Ö–∏–∫–æ–π: –∫–∞–∫—É—é –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Ä–∞–±–æ—Ç—É –æ—Ç—Ä–∞–∂–∞–µ—Ç, —á—Ç–æ —Ä–µ–≥—É–ª–∏—Ä—É–µ—Ç (—Å—Ç—Ä–∞—Ö/–∂–µ–ª–∞–Ω–∏–µ/–≥—Ä–∞–Ω–∏—Ü—ã/—Å—Ç—ã–¥/—É—Ç—Ä–∞—Ç—É/–∫–æ–Ω—Ç—Ä–æ–ª—å), —á—Ç–æ –ø—ã—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å.\n\n‚úÖ 7) –ú–ò–ö–†–û-–í–´–í–û–î (1 —Å—Ç—Ä–æ–∫–∞, –ë–ï–ó –∑–∞–¥–∞–Ω–∏–π –∏ –ë–ï–ó –≤–æ–ø—Ä–æ—Å–æ–≤)\n–§–æ—Ä–º–∞—Ç: ‚Äú–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥: –æ–±—Ä–∞—Ç–∏ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ ‚Ä¶‚Äù / ‚Äú–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥: –æ—Ç–º–µ—Ç—å –¥–ª—è —Å–µ–±—è ‚Ä¶‚Äù.\n\nüí¨ 8) –ó–ê–í–ï–†–®–ï–ù–ò–ï + CTA (1‚Äì2 —Å—Ç—Ä–æ–∫–∏)\n‚Äú–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å —Å–æ–Ω –≥–ª—É–±–∂–µ –≤ –ª–∏—á–Ω–æ–º –¥–∏–∞–ª–æ–≥–µ, –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –∫ –ò—Ä–∏–Ω–µ –®–∏–º–∞–Ω–µ–ª—å (–ò—Ä–∏–Ω–µ –ë—É–±–ª–∏–∫): @Shimanel‚Äù\n\n–§–û–†–ú–ê–¢–ò–†–û–í–ê–ù–ò–ï –ò –î–õ–ò–ù–ê\n- Telegram-ready: –±–æ–ª—å—à–µ –∞–±–∑–∞—Ü–µ–≤, –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–µ–∫—Ü–∏–∏, —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏.\n- 1‚Äì3 –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ-–ø–æ–∑–∏—Ç–∏–≤–Ω—ã—Ö —ç–º–æ–¥–∂–∏ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏.\n- –û–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.\n- –ñ—ë—Å—Ç–∫–∏–π –ª–∏–º–∏—Ç: ‚â§ 3500 —Å–∏–º–≤–æ–ª–æ–≤ (–≤–∫–ª—é—á–∞—è –ø—Ä–æ–±–µ–ª—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã).\n–ï—Å–ª–∏ –Ω–µ –ø–æ–º–µ—â–∞–µ—Ç—Å—è ‚Äî —Å–æ–∫—Ä–∞—â–∞–π –ø—É–Ω–∫—Ç—ã –∏ –∞–±–∑–∞—Ü—ã, –Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–π –ø–æ—Ä—è–¥–æ–∫ —Å–µ–∫—Ü–∏–π –∏ –±–ª–æ–∫ ‚Äú–ò—Ç–æ–≥–æ–≤—ã–π —Å–º—ã—Å–ª‚Äù."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3.1,
      "position": [
        1664,
        832
      ],
      "id": "d9e61089-93b7-4a14-89a2-97c631edd392",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5.2",
          "mode": "list",
          "cachedResultName": "gpt-5.2"
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        1664,
        1024
      ],
      "id": "0b902736-5c25-42cb-affe-7c8163736214",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "thYItVt2bWrUlmgh",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Build final Telegram message (single message <= 3500 chars)\nconst MAX = 3500;\n\n// Get agent output\nconst out = ($json.output ?? $json.text ?? '').toString().trim();\nif (!out) throw new Error('Empty agent output');\n\n// Unicode-safe helpers\nconst uLen = (s) => Array.from(s).length;\nconst uSlice = (s, start, end) => Array.from(s).slice(start, end).join('');\n\n// Trim to MAX with a soft ending\nlet text = out.replace(/\\r\\n/g, '\\n').trim();\n\nif (uLen(text) > MAX) {\n  // Leave room for suffix\n  const suffix = '\\n\\n‚Ä¶(—Å–æ–∫—Ä–∞—â–µ–Ω–æ –∏–∑‚Äë–∑–∞ –ª–∏–º–∏—Ç–∞ Telegram)';\n  const room = MAX - uLen(suffix);\n  text = uSlice(text, 0, Math.max(0, room)).trimEnd() + suffix;\n}\n\nconst chatId = $json.chatId;\n\nreturn [{\n  json: {\n    ...$json,\n    chatId,\n    text,\n  }\n}];"
      },
      "id": "3c4b1d29-49d0-44a3-9b22-bc852d0ff355",
      "name": "Finalize Text",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2080,
        832
      ]
    },
    {
      "parameters": {
        "chatId": "={{ $json.chatId }}",
        "text": "={{ $json.text }}",
        "additionalFields": {}
      },
      "id": "c5c4e607-0c8c-4bf9-9c97-43f2f1f1ad2d",
      "name": "Send Final Interpretation",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1,
      "position": [
        2272,
        832
      ],
      "webhookId": "8a95f392-0c34-40e8-b5d7-2e65c4dbd462",
      "credentials": {
        "telegramApi": {
          "id": "3USnxVmFx9dNCtyF",
          "name": "Dream Int TELEGRAM"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Telegram Trigger1": {
      "main": [
        [
          {
            "node": "Prep Input",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Prep Input": {
      "main": [
        [
          {
            "node": "Is Command?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Is Command?": {
      "main": [
        [
          {
            "node": "Reply to Command",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Send Chat Action (typing)",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Send Chat Action (typing)": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "Finalize Text",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Finalize Text": {
      "main": [
        [
          {
            "node": "Send Final Interpretation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "availableInMCP": false
  },
  "versionId": "ed55f7bc-f19c-4feb-a18e-2512b8054bb7",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "3a21cbdb060244385569a94f6b324011817d3860ac9358f1e3bc8a8c7a228f29"
  },
  "id": "YjwgBGXxlkMZOI3P",
  "tags": []
}